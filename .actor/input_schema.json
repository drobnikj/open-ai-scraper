{
    "title": "GPT scraper",
    "type": "object",
    "description": "Crawler scrapers pages and runs GPT model instruction for each page.",
    "schemaVersion": 1,
    "properties": {
        "startUrls": {
            "title": "Start URLs",
            "type": "array",
            "description": "A static list of URLs to scrape. <br><br>For details, see <a href='https://apify.com/apify/web-scraper#start-urls' target='_blank' rel='noopener'>Start URLs</a> in README.",
            "prefill": [
                { "url": "https://apify.com/" }
            ],
            "editor": "requestListSources"
        },
        "globs": {
            "title": "Glob Patterns",
            "type": "array",
            "description": "Glob patterns to match links in the page that you want to enqueue. Combine with Link selector to tell the scraper where to find links. Omitting the Glob patterns will cause the scraper to enqueue all links matched by the Link selector.",
            "editor": "globs",
            "default": [],
            "prefill": [{
                "glob": "https://apify.com/*"
            }]
        },
        "linkSelector": {
            "title": "Link selector",
            "type": "string",
            "description": "A CSS selector saying which links on the page (<code>&lt;a&gt;</code> elements with <code>href</code> attribute) shall be followed and added to the request queue. To filter the links added to the queue, use the <b>Pseudo-URLs</b> setting.<br><br>If <b>Link selector</b> is empty, the page links are ignored.<br><br>For details, see <a href='https://apify.com/apify/web-scraper#link-selector' target='_blank' rel='noopener'>Link selector</a> in README.",
            "editor": "textfield",
            "prefill": "a[href]",
            "default": "a[href]"
        },
        "instructions": {
            "title": "Instructions for GPT",
            "type": "string",
            "description": "Instruct GPT how to generate text. For example: \"Summarize this page into three sentences.\"<br><br>You can instruct to OpenAI to answer with \"skip this page\", which will skip the page. For example: \"Summarize this page into three sentences. If the page is about Apify Proxy answer with 'skip this page'.\".",
            "prefill": "Summarize this page into three sentences.",
            "editor": "textarea"
        },
        "openaiApiKey": {
            "title": "OpenAI API key",
            "type": "string",
            "description": "The API key for access OpenAI. You can get it from <a href='https://platform.openai.com/account/api-keys' target='_blank' rel='noopener'>OpenAI platform</a>.",
            "editor": "textfield",
            "isSecret": true
        },
        "model": {
            "title": "GPT model",
            "type": "string",
            "description": "Select GPT model, see <a href='https://platform.openai.com/docs/models/overview' target='_blank' rel='noopener'>models overview</a>.",
            "editor": "select",
            "default": "gpt-3.5-turbo",
            "enum": ["gpt-3.5-turbo", "gpt-4", "text-davinci-003"],
            "enumTitles": ["GPT-3.5 Turbo", "GPT-4", "GTP-3 (davinci)"]
        },
        "targetSelector": {
            "title": "Content selector",
            "type": "string",
            "description": "A CSS selector of HTML element on the page will be used in instruction. Istead of whole page you can use only part of the page. For example: \"div#content\".",
            "editor": "textfield",
            "prefill": ""
        },
        "content": {
            "title": "Page content",
            "type": "string",
            "description": "You can select how to process the page using GPT. The markdown is set by default as it works best as input for GPT chat.",
            "editor": "select",
            "default": "markdown",
            "enum": ["markdown", "html", "text"],
            "enumTitles": ["Markdown", "HTML", "Plain Text"]
        },
        "longContentConfig": {
            "title": "How to handle with too long content?",
            "type": "string",
            "description": "Select how to handle with too long content. The default is to shorten the content.\n\nShorten content - the content will be shortened to the maximum length.\n\nSplit content - the content will be split into multiple chunks and the instruction will run for each of them.\n\nSkip page - the page will be skipped.",
            "editor": "select",
            "default": "us",
            "enum": ["shorten", "split", "skip"],
            "enumTitles": ["Shorten content", "Split content (works only for markdown)", "Skip page"]
        },
        "maxPagesPerCrawl": {
            "title": "Max pages per run",
            "type": "integer",
            "description": "Maximum number of pages that the scraper will open. 0 means unlimited.",
            "minimum": 0,
            "default": 10,
            "unit": "pages"
        },
        "proxyConfiguration": {
            "sectionCaption": "Proxy configuration",
            "title": "Proxy configuration",
            "type": "object",
            "description": "Specifies proxy servers that will be used by the scraper in order to hide its origin.<br><br>For details, see <a href='https://apify.com/apify/web-scraper#proxy-configuration' target='_blank' rel='noopener'>Proxy configuration</a> in README.",
            "prefill": { "useApifyProxy": true },
            "default": { "useApifyProxy": false },
            "editor": "proxy"
        }
    },
    "required": ["startUrls", "instructions", "model", "content", "openaiApiKey" ]
}
